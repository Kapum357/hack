<!DOCTYPE html>

<html class="dark" lang="en"><head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Risk Prediction and Alert System</title>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Sora:wght@400;500;600;700;800&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" rel="stylesheet"/>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>tailwind.config = {darkMode: "class", theme: {extend: {colors: {primary: "#002468", "background-light": "#f5f6f8", "background-dark": "#0f1623"}, fontFamily: {display: "Sora"}, borderRadius: {DEFAULT: "0.125rem", lg: "0.25rem", xl: "0.5rem", full: "0.75rem"}}}};</script>
<style>
    .material-symbols-outlined {
      font-variation-settings:
        'FILL' 0,
        'wght' 400,
        'GRAD' 0,
        'opsz' 24
    }
  </style>
</head>
<body class="font-display bg-background-light dark:bg-background-dark">
<div class="relative flex h-screen w-full flex-col">
<div class="flex h-full grow">
<!-- SideNavBar -->
<aside class="flex h-full w-72 flex-col justify-between border-r border-white/10 bg-[#112218] p-4">
<div class="flex flex-col gap-6">
<div class="flex items-center gap-3 px-2">
<div class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10" data-alt="Abstract green and blue circular pattern" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuAKRRE5dAXKFeyod7jJX2zDDKxvs80BtinhtSVWSRwvF4jEsntysfE2CEr8grq0MnOS_Nm8r93behzNFK_MoPe4-A1IxUaKrdLTGP_v06HJrv0M5m_2cj9zoHI5pbMA46HQa9UtwaTTC44wd1C3d3HwxbjcCqmuS3o4NNc81MxHHb4jdlK3bXLiWYLt5XR1PVTsW6lsVw0THkua7Ti8_86ptjbfCcUEr7yUfWolHsrMfOoC5RLhb1PPL3euyfR3Jlmpk7l-iBDxVr4");'></div>
<div class="flex flex-col">
<h1 class="text-white text-base font-medium leading-normal">Urban Climate Resilience</h1>
<p class="text-[#92c9a8] text-sm font-normal leading-normal">Soacha, Colombia</p>
</div>
</div>
<!-- Navigation -->
<nav class="flex flex-col gap-2">
<a class="flex items-center gap-3 rounded-lg px-3 py-2 text-white/70 transition-colors hover:bg-white/10" href="#">
<span class="material-symbols-outlined">dashboard</span>
<p class="text-sm font-medium leading-normal">Dashboard</p>
</a>
<a class="flex items-center gap-3 rounded-lg bg-[#234832] px-3 py-2 text-white transition-colors" href="#">
<span class="material-symbols-outlined" style="font-variation-settings: 'FILL' 1;">warning</span>
<p class="text-sm font-medium leading-normal">Risk Prediction</p>
</a>
<a class="flex items-center gap-3 rounded-lg px-3 py-2 text-white/70 transition-colors hover:bg-white/10" href="#">
<span class="material-symbols-outlined">history</span>
<p class="text-sm font-medium leading-normal">Alert History</p>
</a>
<a class="flex items-center gap-3 rounded-lg px-3 py-2 text-white/70 transition-colors hover:bg-white/10" href="#">
<span class="material-symbols-outlined">settings</span>
<p class="text-sm font-medium leading-normal">Settings</p>
</a>
</nav>
</div>
<!-- Alert Button -->
<button class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-primary text-[#112218] text-sm font-bold leading-normal tracking-[0.015em]">
<span class="truncate">Send Alert</span>
</button>
</aside>
<!-- Main Content -->
<main class="flex flex-1 flex-col">
<!-- TopNavBar -->
<header class="flex items-center justify-between whitespace-nowrap border-b border-solid border-b-[#234832] px-10 py-3">
<div class="flex items-center gap-4 text-white">
<div class="size-4 text-primary">
<svg fill="none" viewbox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
<path clip-rule="evenodd" d="M12.0799 24L4 19.2479L9.95537 8.75216L18.04 13.4961L18.0446 4H29.9554L29.96 13.4961L38.0446 8.75216L44 19.2479L35.92 24L44 28.7521L38.0446 39.2479L29.96 34.5039L29.9554 44H18.0446L18.04 34.5039L9.95537 39.2479L4 28.7521L12.0799 24Z" fill="currentColor" fill-rule="evenodd"></path>
</svg>
</div>
<h2 class="text-white text-lg font-bold leading-tight tracking-[-0.015em]">Risk Prediction &amp; Alerts</h2>
</div>
<div class="flex flex-1 items-center justify-end gap-6">
<div class="text-sm text-white/60">Data updated: 2 minutes ago</div>
<div class="flex gap-2">
<button class="flex max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 bg-[#234832] text-white gap-2 text-sm font-bold leading-normal tracking-[0.015em] min-w-0 px-2.5">
<span class="material-symbols-outlined text-xl">notifications</span>
</button>
<button class="flex max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 bg-[#234832] text-white gap-2 text-sm font-bold leading-normal tracking-[0.015em] min-w-0 px-2.5">
<span class="material-symbols-outlined text-xl">help</span>
</button>
</div>
<div class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10" data-alt="User avatar with a gradient background" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuB-JjE1WlYz0nuHsvHjUCloH6nsyWFcKwIf5Oycq1kHNPRKI7HeuPkovRvEJqJO8oulTCYNsuWGeIw02Ot7a858jOemDoPUsyCzLY88EckkiwxX3wklL-JOo3WVLbpfpmC5RQXmwoaGlvu_xGItOp-BuhGM0QqifUVm7LX8rcBTpgtfYWZVx9zWmN7CjZ5JbiZ0IMourKTL5zgcKA2NF9LYGNIlloVpmSXZkeK2uy5bnWezw-BFxtjJjvRZ3Tmz5Jc5jiFMKGaRML4");'></div>
</div>
</header>
<!-- Content Area -->
<div class="flex flex-1 overflow-hidden">
<!-- Main Map Area -->
<div class="flex flex-1 flex-col">
<div class="@container flex h-full flex-1 flex-col">
<div class="flex flex-1 flex-col p-6 @[480px]:p-8">
<div id="map" class="flex min-h-[320px] flex-1 flex-col justify-between rounded-lg relative">
<label class="flex w-full max-w-md flex-col min-w-40 h-12 self-start z-10 relative">
<div class="flex w-full flex-1 items-stretch rounded-lg h-full shadow-lg">
<div class="text-[#92c9a8] flex border-none bg-[#193324] items-center justify-center pl-4 rounded-l-lg border-r-0">
<span class="material-symbols-outlined">search</span>
</div>
<input class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-white focus:outline-0 focus:ring-0 border-none bg-[#193324] focus:border-none h-full placeholder:text-[#92c9a8] px-4 rounded-l-none border-l-0 pl-2 text-base font-normal leading-normal" placeholder="Search neighborhoods or landmarks" value=""/>
</div>
</label>
<div class="flex items-end justify-between absolute bottom-6 left-6 right-6 @[480px]:bottom-8 @[480px]:left-8 @[480px]:right-8">
<!-- Information Card -->
<div class="flex w-80 flex-col gap-4 rounded-lg bg-[#112218]/80 p-4 backdrop-blur-sm ring-1 ring-white/10 z-10">
<div class="flex flex-col">
<p class="text-sm font-medium text-white/70">Barrio Cazucá</p>
<h3 class="text-xl font-bold text-white">High Risk (9/10)</h3>
</div>
<div class="flex flex-col gap-2">
<div class="flex items-center justify-between">
<p class="text-sm text-white/80">Predicted Precipitation</p>
<p class="font-semibold text-white">50mm/hr</p>
</div>
<div class="flex items-center justify-between">
<p class="text-sm text-white/80">Affected Households</p>
<p class="font-semibold text-white">~500</p>
</div>
</div>
<p class="text-xs text-primary">Potential for flash flooding. Community alert recommended.</p>
</div>
<!-- Map Controls -->
<div class="flex flex-col items-end gap-3 z-10">
<div class="flex flex-col gap-0.5">
<button class="flex size-10 items-center justify-center rounded-t-lg bg-[#193324] shadow-[0_2px_4px_rgba(0,0,0,0.1)] text-white hover:bg-[#234832]">
<span class="material-symbols-outlined">add</span>
</button>
<button class="flex size-10 items-center justify-center rounded-b-lg bg-[#193324] shadow-[0_2px_4px_rgba(0,0,0,0.1)] text-white hover:bg-[#234832]">
<span class="material-symbols-outlined">remove</span>
</button>
</div>
<button class="flex size-10 items-center justify-center rounded-lg bg-[#193324] shadow-[0_2px_4px_rgba(0,0,0,0.1)] text-white hover:bg-[#234832]">
<span class="material-symbols-outlined">my_location</span>
</button>
</div>
</div>
</div>
</div>
</div>
</div>
<!-- Filters & Controls Sidebar -->
<aside class="flex h-full w-96 flex-col border-l border-white/10 bg-[#112218]">
<div class="border-b border-white/10 p-4">
<h2 class="text-white text-lg font-bold leading-tight tracking-[-0.015em]">Filters &amp; Controls</h2>
</div>
<div class="flex flex-col gap-6 p-4">
<!-- Time/Date Slider -->
<div class="relative flex w-full flex-col items-start justify-between gap-3">
<p class="text-white text-base font-medium leading-normal">Time/Date</p>
<div class="flex h-[38px] w-full pt-1.5">
<div class="flex h-1 w-full rounded-sm bg-[#326747] pl-[0%] pr-[25%]">
<div class="relative">
<div class="absolute -left-2 -top-1.5 flex flex-col items-center gap-1">
<div class="size-4 rounded-full bg-primary ring-2 ring-[#112218]"></div>
<p class="text-white text-sm font-normal leading-normal">Now</p>
</div>
</div>
<div class="h-1 flex-1 rounded-sm bg-primary"></div>
<div class="relative">
<div class="absolute -right-2 -top-1.5 flex flex-col items-center gap-1">
<div class="size-4 rounded-full border-2 border-primary bg-[#112218]"></div>
<p class="text-white text-sm font-normal leading-normal">+72 hrs</p>
</div>
</div>
</div>
</div>
</div>
<!-- Data Layer Controls -->
<div class="flex flex-col gap-3">
<p class="text-white text-base font-medium leading-normal">Map Layers</p>
<div class="flex flex-col gap-2">
<label class="flex items-center gap-2">
<input checked="" class="form-checkbox h-4 w-4 rounded border-white/30 bg-transparent text-primary focus:ring-primary/50" type="checkbox"/>
<span class="text-sm text-white">Flood Risk</span>
</label>
<label class="flex items-center gap-2">
<input class="form-checkbox h-4 w-4 rounded border-white/30 bg-transparent text-primary focus:ring-primary/50" type="checkbox"/>
<span class="text-sm text-white/70">Landslide Risk</span>
</label>
<label class="flex items-center gap-2">
<input class="form-checkbox h-4 w-4 rounded border-white/30 bg-transparent text-primary focus:ring-primary/50" type="checkbox"/>
<span class="text-sm text-white/70">Precipitation Forecast</span>
</label>
</div>
</div>
<!-- Data Source Selector -->
<div class="flex flex-col gap-2">
<label class="text-white text-base font-medium leading-normal" for="dataSource">Risk Threshold</label>
<select class="form-select w-full rounded-lg border-none bg-[#193324] text-white focus:border-primary focus:ring-primary" id="dataSource">
<option>High Risk Only (8+)</option>
<option>Medium Risk and Above (5+)</option>
<option>Show All Risk Levels</option>
</select>
</div>
<!-- Risk Legend -->
<div class="flex flex-col gap-2">
<p class="text-white text-base font-medium leading-normal">Risk Legend</p>
<div class="flex w-full items-center gap-2">
<span class="text-sm text-white/70">Low</span>
<div class="h-2 flex-1 rounded-full bg-gradient-to-r from-yellow-400 via-orange-500 to-red-600"></div>
<span class="text-sm text-white/70">High</span>
</div>
</div>
</div>
</aside>
</div>
</main>
</div>
</div>
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Initialize map
    const map = L.map('map').setView([4.58, -74.21], 13);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '© OpenStreetMap contributors'
    }).addTo(map);

    // Mock risk areas (polygons with risk levels)
    const riskAreas = [
        {
            name: 'Barrio Cazucá',
            coords: [[4.59, -74.22], [4.59, -74.20], [4.57, -74.20], [4.57, -74.22]],
            risk: 9,
            households: 500
        },
        {
            name: 'El Danubio',
            coords: [[4.58, -74.215], [4.58, -74.205], [4.56, -74.205], [4.56, -74.215]],
            risk: 7,
            households: 300
        },
        // Add more areas as needed
    ];

    // Function to get color based on risk
    function getColor(risk) {
        return risk > 8 ? '#dc2626' : risk > 5 ? '#ea580c' : '#eab308';
    }

    // Add risk polygons
    riskAreas.forEach(area => {
        L.polygon(area.coords, {color: getColor(area.risk), fillOpacity: 0.5}).addTo(map)
            .bindPopup(`<b>${area.name}</b><br>Risk: ${area.risk}/10<br>Households: ~${area.households}`);
    });

    // Mock weather data (in real app, fetch from API)
    const weatherData = {
        precipitation: 50, // mm/hr
        temperature: 32, // C
        humidity: 80 // %
    };

    // Simple risk prediction logic
    function calculateRisk(precip, temp, humid) {
        let risk = 0;
        if (precip > 40) risk += 4;
        else if (precip > 20) risk += 2;
        if (temp > 30) risk += 3;
        if (humid > 70) risk += 2;
        return Math.min(risk, 10);
    }

    const currentRisk = calculateRisk(weatherData.precipitation, weatherData.temperature, weatherData.humidity);

    // Update info card
    const infoCard = document.querySelector('.flex.w-80');
    if (infoCard) {
        const riskText = infoCard.querySelector('h3');
        const precipTexts = infoCard.querySelectorAll('p.font-semibold');
        const precipText = precipTexts[0];
        const householdsText = precipTexts[1];
        const alertText = infoCard.querySelector('p.text-xs');

        riskText.textContent = `High Risk (${currentRisk}/10)`;
        precipText.textContent = `${weatherData.precipitation}mm/hr`;
        householdsText.textContent = '~500'; // Mock
        alertText.textContent = currentRisk > 8 ? 'Potential for flash flooding. Community alert recommended.' : 'Moderate risk. Monitor conditions.';
    }

    // Alert system
    if (currentRisk > 8) {
        // Show alert
        const alertDiv = document.createElement('div');
        alertDiv.className = 'fixed top-4 right-4 bg-red-600 text-white p-4 rounded-lg shadow-lg z-50';
        alertDiv.innerHTML = '<strong>ALERT:</strong> High risk of flooding detected. Evacuation recommended for vulnerable areas.';
        document.body.appendChild(alertDiv);
        setTimeout(() => alertDiv.remove(), 10000);
    }

    // Map controls
    const buttons = document.querySelectorAll('button');
    buttons.forEach(btn => {
        const icon = btn.querySelector('.material-symbols-outlined');
        if (icon) {
            if (icon.textContent.includes('add')) {
                btn.addEventListener('click', () => map.zoomIn());
            } else if (icon.textContent.includes('remove')) {
                btn.addEventListener('click', () => map.zoomOut());
            } else if (icon.textContent.includes('my_location')) {
                btn.addEventListener('click', () => map.locate({setView: true, maxZoom: 16}));
            }
        }
    });

    // Send Alert button
    const sendAlertBtn = Array.from(document.querySelectorAll('button span')).find(span => span.textContent.includes('Send Alert'));
    if (sendAlertBtn) {
        sendAlertBtn.parentElement.addEventListener('click', () => {
            alert('Alert sent to community leaders and emergency services.');
        });
    }
});
</script>
</body></html>
